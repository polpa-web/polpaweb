<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>POLPAWEB: squiddiness at its finest!!</title>

  <!-- Collegamento al CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase + Funzioni in JS -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // 🔐 CONFIG FIREBASE: Sostituisci questi valori con i TUOI dati reali da Firebase Console
    const firebaseConfig = {
      apiKey: "AIzaSyD4lrtmej3QhkfT_Ff60e6-rRWPnpHqKi4",
      authDomain: "polpawebcom.firebaseapp.com",
      databaseURL: "https://polpawebcom.firebaseio.com",
      projectId: "polpawebcom",
      storageBucket: "polpawebcom.appspot.com",
      messagingSenderId: "676513696855",
      appId: "1:676513696855:web:5083066d8f43cc85e2a712"
    };

    // 🔌 Inizializza Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const commentsRef = ref(db, 'comments');

    // 📤 Funzione per inviare un commento
    window.submitComment = () => {
      const input = document.getElementById("comment-input");
      if (input.value.trim()) {
        push(commentsRef, { text: input.value });
        input.value = '';
      }
    };

    // 📥 Caricamento dei commenti dal database
    window.addEventListener("load", () => {
      // Carica l'immagine random
      if (window.loadImage) loadImage();

      // Mostra i commenti salvati
      onValue(commentsRef, (snapshot) => {
        const container = document.getElementById("comments-list");
        container.innerHTML = '';
        snapshot.forEach(child => {
          const p = document.createElement("p");
          p.textContent = child.val().text;
          container.appendChild(p);
        });
      });
    });
  </script>
</head>
<body>

  <!-- Titolo con mascotte -->
  <div id="header-with-mascot">
    <img class="mascot" src="images/mascotte.jpg" alt="Polpina a sinistra" />
    <h1>POLPAWEB: squiddiness at its finest!!</h1>
    <img class="mascot flip" src="images/mascotte.jpg" alt="Polpina a destra" />
  </div>

  <!-- Cuoricini -->
  <div id="hearts">💖💖💖</div>

  <!-- Immagine polposa -->
  <img id="octopus-image" src="" alt="CUTE SQUID" />

  <!-- Bottone NEW POLP -->
  <div id="button-wrapper">
    <button id="new-octopus"><span>NEW POLP</span></button>
  </div>

  <!-- Sezione commenti -->
  <div id="comments-section">
    <h2>🐙 Polpini Comments 🐙</h2>
    <input type="text" id="comment-input" placeholder="Leave your squiddy thought..." />
    <button onclick="submitComment()">Send</button>
    <div id="comments-list"></div>
  </div>

  <!-- Footer poetico -->
  <footer>
    <p>
      Welcome on POLPAWEB 🐙🦑! The squiddiest website on the internet!<br />
      Click to reveal an amazingly wonderful image of an octopus or squid! 💖<br />
      POLPOLPOLPOLPOLPOLPOLP. POLP! EVVIVA I POLPINI!<br />
      DANKJEWEL VOOR DE FIETS!
    </p>
  </footer>

  <!-- Script JS esterno -->
  <script src="script.js"></script>
</body>
</html>
