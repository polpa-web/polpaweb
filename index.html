<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>POLPAWEB: squiddiness at its finest!!</title>
  <link rel="stylesheet" href="style.css">
  <!-- Firebase SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyD4lrtmej3QhkfT_Ff60e6-rRWPnpHqKi4",
      authDomain: "polpawebcom.firebaseapp.com",
      databaseURL: "https://polpawebcom.firebaseio.com",
      projectId: "polpawebcom",
      storageBucket: "polpawebcom.appspot.com",
      messagingSenderId: "676513696855",
      appId: "1:676513696855:web:5083066d8f43cc85e2a712"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const commentsRef = ref(db, 'comments');

    window.submitComment = () => {
      const input = document.getElementById("comment-input");
      if (input.value.trim()) {
        push(commentsRef, { text: input.value });
        input.value = '';
      }
    };

    window.onload = () => {
      loadImage();
      onValue(commentsRef, (snapshot) => {
        const container = document.getElementById("comments-list");
        container.innerHTML = '';
        snapshot.forEach(child => {
          const p = document.createElement("p");
          p.textContent = child.val().text;
          container.appendChild(p);
        });
      });
    };
  </script>
</head>
<body>

  <!-- Titolo con due mascotte -->
  <div id="header-with-mascot">
    <img class="mascot" src="images/mascotte.jpg" alt="Polpina a sinistra">
    <h1>POLPAWEB: squiddiness at its finest!!</h1>
    <img class="mascot flip" src="images/mascotte.jpg" alt="Polpina a destra">
  </div>

  <!-- Cuoricini -->
  <div id="hearts">ğŸ’–ğŸ’–ğŸ’–</div>

  <!-- Immagine random -->
  <img id="octopus-image" src="" alt="CUTE SQUID" />

  <!-- Bottone centrato -->
  <div id="button-wrapper">
    <button id="new-octopus"><span>NEW POLP</span></button>
  </div>

  <!-- Commenti -->
  <div id="comments-section">
    <h2>ğŸ™ Polpini Comments ğŸ™</h2>
    <input type="text" id="comment-input" placeholder="Leave your squiddy thought..." />
    <button onclick="submitComment()">Send</button>
    <div id="comments-list"></div>
  </div>

  <!-- Footer -->
  <footer>
    <p>
      Welcome on POLPAWEBğŸ™ğŸ¦‘! The squiddiest website on the internet!  
      Click to reveal an amazingly wonderful image of an octopus or squid! ğŸ’–  
      POLPOLPOLPOLPOLPOLPOLP. POLP! EVVIVA I POLPINI!  
      DANKJEWEL VOOR DE FIETS!
    </p>
  </footer>

  <!-- Script -->
  <script src="script.js"></script>

</body>
</html>
